<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>GolfinUp</title>
	
	
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
    </script>
	
</head>

<body id="stats">
    <div class="app conatiner">
		<div class="row">
			<div class="col-12">
					<h2><img src="img/icono-stats.svg" />   Stats</h2>
			</div>
		</div>
		<div class="row">
			<div class="col-12">
			</div>
		</div>
		<div class="row">
			<div class="col-12" id="sgtotal"></div>
		</div>
    </div>
<footer class="fixed-bottom">
	<div class="container-fluid">
		<div class="col-3 ">
			<a href="home.html">
				<img src="img/home_inactive.svg"><br>Dashboard
			</a>
		</div>
		<div class="col-3">
			<a href="play.html">
				<img src="img/input_inactive.svg"><br>Input
			</a>
		</div>
		<div class="col-3 active">
			<a href="stats.html">
				<img src="img/stats.svg"><br>Stats
			</a>
		</div>
		<div class="col-3">
			<a href="ajustes.html">
				<img src="img/ajustes_inactive.svg"><br>Config.
			</a>
		</div>
	</div>
</footer>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="https://unpkg.com/popper.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/bootstrap3-typeahead.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
		var chart_data;
		$(document).ready(function(){
			$.ajax({
				type: 'post',
				cache: false,
				url: 'http://proyectosweb.info/golf/privado/get_sg',
				data: {
					'user_id':window.localStorage.getItem("user_id"),
					'units':window.localStorage.getItem("units")
				},
				dataType: 'json',
				success: function(response){
					//console.log(response.chart);
					$('#sgtotal').html(response.html);
					chart_data = response.chart;
					google.charts.setOnLoadCallback(drawChart);
				}
			});
						

		});
		
		
		function drawChart() {
			$.each( chart_data, function( index, value ){
				var vData=[];
				
				$.each( value, function( i, v ){
					if (v > 0){
						vData.push([i,v,'color:#00bcb4']);
					} else {
						vData.push([i,v,'color:#e21630']);
					}
				})
				console.log(vData);
				 var data = new google.visualization.DataTable();
				  data.addColumn('string', 'Element');
				  data.addColumn('number', 'Value');
				  data.addColumn({role: 'style', type: 'string'});

				  data.addRows(vData);

				var barchart_options = {title:'',width:800,height:400, chartArea: {width: '85%', height: '80%'},legend:'none',hAxis:{textStyle:{fontSize:9},slantedText:true},bar: { groupWidth: "90%" }};
				
			var barchart = new google.visualization.ColumnChart($('#chart_div'+index)[0]);
				barchart.draw(data,barchart_options);
			})
		}

     

    </script>
</body>

</html>