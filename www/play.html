<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>GolfinUp</title>
</head>

<body id="play">
    <div class="app conatiner">
		<div class="row">
			<div class="col-sm-2"></div>
			<div class="col-sm-8">
				<div id="logo">
					<img src="img/icono-jugar.svg" />
				<h2>Let's start!</h2>
				<p>¿En que campo estás?<br>
Así podremos comparar tus<br>estadísticas la próxima vez.</p>
					<input type="text" name="course" class="form-control typeahead"  placeholder="Introduce el campo" />
					<a href="condiciones.html" class="btn btn-secondary">Siguiente</a>
				</div>
			</div>
			<div class="col-sm-2"></div>
		</div>
    </div>
<footer class="fixed-bottom">
	<div class="container-fluid">
		<div class="col-3">
			<a href="home.html">
				<img src="img/home_inactive.svg"><br>Dashboard
			</a>
		</div>
		<div class="col-3 active">
			<a href="play.html">
				<img src="img/input.svg"><br>Input
			</a>
		</div>
		<div class="col-3">
			<a href="stats.html">
				<img src="img/stats_inactive.svg"><br>Stats
			</a>
		</div>
		<div class="col-3">
			<a href="ajustes.html">
				<img src="img/ajustes_inactive.svg"><br>Config.
			</a>
		</div>
	</div>
</footer>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="https://unpkg.com/popper.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/bootstrap3-typeahead.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
		var sourceplaces = [];
		
		
		$('input[name="course"]').change(function(){
			window.localStorage.setItem("course", $(this).val());
		});
		$(document).ready(function(){
		
		cordova.plugins.diagnostic.isGpsLocationEnabled(function(enabled){
			//console.log("GPS location is " + (enabled ? "enabled" : "disabled"));
			navigator.geolocation.getCurrentPosition(geosuccess);
		}, function(error){
			window.alert("GPS is required to offer nearby courses");
		});    
		
		})
		function geosuccess(pos) {
		  var crd = pos.coords;

		  //console.log('Your current position is:');
		  //console.log('Latitude : ' + crd.latitude);
		  //console.log('Longitude: ' + crd.longitude);
		  //console.log('More or less ' + crd.accuracy + ' meters.');
		  
		  $.ajax({
					type: 'get',
					cache: false,
					url: 'https://maps.googleapis.com/maps/api/place/nearbysearch/json',
					data: {
						'location': crd.latitude+','+crd.longitude,
						'radius': '50000',
						'keyword': 'golf course',
						'key':'AIzaSyDoY5pf3EJ7XzcI-jvpYg3s6s2uG3BiCVY'
					},
					dataType: 'json',
					success: function(response){
						for (i=0;i<response.results.length;i++){
							 //console.log(response.results[i].name);
							sourceplaces[i]=response.results[i].name;
						}
						
						$('.typeahead').typeahead({
							source: sourceplaces
						});
					}
				});
		  
		};
    </script>
</body>

</html>