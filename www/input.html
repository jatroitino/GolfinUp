<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>GolfinUp</title>
</head>

<body id="input">
    <div class="app conatiner">
		<div class="row">
			<div class="col-1"></div>
			<div class="col-10">
				<div class="row no-gutters pinfo">
					<div class="col-4">Course: <span id="course"></span></div>
					<div class="col-3">Hole: <span id="hole"></span></div>
					<div class="col-2">Par: <span id="par"></span></div>
					<div class="col-3">Round: <span id="tour"></span></div>
				</div>
				<h2><img src="img/icono-hoyo-peque-o.svg" />   Strike <span></span></h2>
				<div class="row  no-gutters">
					<div class="col-8">
						Hole distance:
					</div>
					<div class="col-4 pdist">
						meters&nbsp;&nbsp;&nbsp;<input type="number" name="distance" id="distance" class="form-control" />
					</div>
				</div>
				<div class="row  no-gutters disabled s2">
					<div class="col-3">
						Lie:
					</div>
					<div class="col-9">
						<select class="form-control"  name="lie" id="lie">
							<option>Salida</option>
							<option>Calle</option>
							<option>Bunker</option>
							<option>Green</option>
						</select>
					</div>
				</div>
				<div class="row  no-gutters disabled s3">
					<div class="col-3">
						Club:
					</div>
					<div class="col-9">
						<select class="form-control"  name="club" id="club">
							<option>Wood</option>
							<option>Iron 1</option>
							<option>Iron 2</option>
							<option>Iron 3</option>
							<option>Drive</option>
						</select>
					</div>
				</div>
				<div class="row  no-gutters disabled s4">
					<div class="col-6">
						Blow prevented:
					</div>
					<div class="col-6">
						<input type="checkbox" name="prevented" id="prevented" class="form-control form-control-lg">
					</div>
				</div>
				<div class="row  no-gutters disabled s5">
					<div class="col-6">
						Penalty:
					</div>
					<div class="col-6">
						<input type="checkbox" name="penalty" id="penalty" class="form-control form-control-lg">
					</div>
				</div>

			</div>
			<div class="col-1"></div>
			<div class="col-6 aright">
				<a href="" id="endhole" class="btn btn-danger">End hole</a>
			</div>
			<div class="col-6 aleft">
				<a href="" id="nextstrike" class="btn btn-info">Next strike</a>
			</div>
		</div>
    </div>
<footer class="fixed-bottom">
	<div class="container-fluid">
		<div class="col-3">
			<a href="home.html">
				<img src="img/home_inactive.svg"><br>Dashboard
			</a>
		</div>
		<div class="col-3 active">
			<a href="play.html">
				<img src="img/input.svg"><br>Input
			</a>
		</div>
		<div class="col-3">
			<a href="stats.html">
				<img src="img/stats_inactive.svg"><br>Stats
			</a>
		</div>
		<div class="col-3">
			<a href="ajustes.html">
				<img src="img/ajustes_inactive.svg"><br>Config.
			</a>
		</div>
	</div>
</footer>

<div class="modal" id="modal1" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Has it been ball holed or lifted?</p>
      </div>
      <div class="modal-footer">
        <button type="button" id="bholed" class="btn btn-primary">Holed</button>
        <button type="button" id="blifted" class="btn btn-primary">Lifted</button>
      </div>
    </div>
  </div>
</div>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="https://unpkg.com/popper.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/bootstrap3-typeahead.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
		
		$(document).ready(function(){
			var strike = parseInt(window.localStorage.getItem("strike"));
			if (!(strike > 0)){
				strike = 1;
			}
			window.localStorage.setItem("strike", strike);
			if (window.localStorage.getItem("holes") == null){
				var holes = new Array();
			} else {
				var holes = JSON.parse(window.localStorage.getItem("holes"));
			}
			holes[window.localStorage.getItem("shole")] = 1;
			window.localStorage.setItem("holes", JSON.stringify(holes));
			$('#course').html(window.localStorage.getItem("course"));
			$('#hole').html(window.localStorage.getItem("shole"));
			$('#par').html(window.localStorage.getItem("par"));
			$('#tour').html(1);
			$('h2 span').html(window.localStorage.getItem("strike"));
		});
		$('#nextstrike').click(function(event){
			event.preventDefault();
			var strike = parseInt(window.localStorage.getItem("strike"));
			if (!(strike > 0)){
				strike = 1;
			}
			window.localStorage.setItem("strike", strike+1);
			$.ajax({
				type: 'post',
				cache: false,
				url: 'http://proyectosweb.info/golf/privado/ajax_save_input',
				data: {
					'user_id':window.localStorage.getItem("user_id"),
					'course':window.localStorage.getItem("course"),
					'tour':1,
					'hole':window.localStorage.getItem("shole"),
					'par':window.localStorage.getItem("par"),
					'strike':window.localStorage.getItem("strike"),
					'distance':$('#distance').val(),
					'lie':$('#lie').val(),
					'club':$('#club').val(),
					'prevented':$('#prevented:checked').length,
					'penalty':$('#penalty:checked').length,
					'lifted':0
				},
				dataType: 'json',
				success: function(response){
					window.location.href = 'input.html';
				}
			});
		});
		
		$('#endhole').click(function(event){
			event.preventDefault();
			$("#modal1").modal("show");
		});
		
		$('#bholed').click(function(event){
			event.preventDefault();
			$("#modal1").modal("hide");
			window.localStorage.setItem("strike", 0);
			$.ajax({
				type: 'post',
				cache: false,
				url: 'http://proyectosweb.info/golf/privado/ajax_save_input',
				data: {
					'user_id':window.localStorage.getItem("user_id"),
					'course':window.localStorage.getItem("course"),
					'tour':1,
					'hole':window.localStorage.getItem("shole"),
					'par':window.localStorage.getItem("par"),
					'strike':window.localStorage.getItem("strike"),
					'distance':$('#distance').val(),
					'lie':$('#lie').val(),
					'club':$('#club').val(),
					'prevented':$('#prevented:checked').length,
					'penalty':$('#penalty:checked').length,
					'lifted':0
				},
				dataType: 'json',
				success: function(response){
					window.location.href = 'holes.html';
				}
			});
		});
		$('#blifted').click(function(event){
			event.preventDefault();
			$("#modal1").modal("hide");
			window.localStorage.setItem("strike", 0);
			$.ajax({
				type: 'post',
				cache: false,
				url: 'http://proyectosweb.info/golf/privado/ajax_save_input',
				data: {
					'user_id':window.localStorage.getItem("user_id"),
					'course':window.localStorage.getItem("course"),
					'tour':1,
					'hole':window.localStorage.getItem("shole"),
					'par':window.localStorage.getItem("par"),
					'strike':window.localStorage.getItem("strike"),
					'distance':$('#distance').val(),
					'lie':$('#lie').val(),
					'club':$('#club').val(),
					'prevented':$('#prevented:checked').length,
					'penalty':$('#penalty:checked').length,
					'lifted':1
				},
				dataType: 'json',
				success: function(response){
					window.location.href = 'holes.html';
				}
			});
		});
		
		$('#distance').change(function(){
			$('.s2').removeClass('disabled');
		});
		$('#lie').change(function(){
			$('.s3').removeClass('disabled');
		});
		$('#club').change(function(){
			$('.s4').removeClass('disabled');
			$('.s5').removeClass('disabled');
		});
    </script>
</body>

</html>