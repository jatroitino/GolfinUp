<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>GolfinUp</title>
</head>

<body id="input">
    <div class="app conatiner">
		<div class="row">
			<div class="col-1"></div>
			<div class="col-10">
				<div class="row no-gutters pinfo">
					<div class="col-6">Course:<br> <span id="course"></span></div>
					<div class="col-2">Round:<br> <span id="tour"></span></div>
					<div class="col-2">Hole:<br> <span id="hole"></span></div>
					<div class="col-2">
						<label class="">Par:</label> 
						<select class="form-control form-control-sm" id="par">
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5</option>
						</select>
					</div>
				</div>
				<h2><img src="img/icono-hoyo-peque-o.svg" />   Stroke <span></span></h2>
				<div class="row  no-gutters">
					<div class="col-8">
						Hole distance:
					</div>
					<div class="col-4 pdist">
						<input type="number" name="distance" id="distance" class="form-control" placeholder="meters"/>
					</div>
				</div>
				<div class="row  no-gutters s2">
					<div class="col-3">
						Lie:
					</div>
					<div class="col-9">
						<select class="form-control"  name="lie" id="lie">
							<option>Teeing</option>
							<option>Fairway</option>
							<option>Bunker</option>
							<option>Rough</option>
							<option>Green</option>
							<option>Other </option>
						</select>
					</div>
				</div>
				<div class="row  no-gutters s3">
					<div class="col-3">
						Club:
					</div>
					<div class="col-9">
						<select class="form-control"  name="club" id="club">
							<option>Drive</option>
							<option>Wood 2</option>
							<option>Wood 3</option>
							<option>Wood 4</option>
							<option>Wood 5</option>
							<option>Wood 6</option>
							<option>Wood 7</option>
							<option>Wood 8</option>
							<option>Wood 9</option>
							<option>Wood 10</option>
							<option>Wood 11</option>
							<option>Iron 1</option>
							<option>Iron 2</option>
							<option>Iron 3</option>
							<option>Iron 4</option>
							<option>Iron 5</option>
							<option>Iron 6</option>
							<option>Iron 7</option>
							<option>Iron 8</option>
							<option>Iron 9</option>
							<option>Pitching wedge</option>
							<option>Gap wedge</option>
							<option>Sand wedge</option>
							<option>Lob wedge</option>
							<option>Ultra lob wedge</option>
							<option>Putter</option>
						</select>
					</div>
				</div>
				<div class="row  no-gutters s4">
					<div class="col-9">
						Impeded shot:
					</div>
					<div class="col-3">
						<input type="checkbox" name="prevented" id="prevented" class="form-control form-control-lg">
					</div>
				</div>
				<div class="row  no-gutters s5">
					<div class="col-9">
						Penalty shot:
					</div>
					<div class="col-3">
						<select name="penalty" id="penalty" class="form-control form-control-sm">
							<option></option>
							<option>1</option>
							<option>2</option>
						</select>
					</div>
				</div>

			</div>
			<div class="col-1"></div>
			
			</div>
			<div class="row wp">
			<div class="col-3 sp">
				<a href="" id="endround" class="btn btn-danger">Finish round</a>
			</div>
			<div class="col-2 sp">
				<a href="" id="toholes" class="btn btn-info">Holes</a>
			</div>
			<div class="col-3 sp">
				<a href="" id="endhole" class="btn btn-info">Next hole</a>
			</div>
			<div class="col-2 sp">
				<a href="" id="prevstrike" class="btn btn-info"><</a>
			</div>
			<div class="col-2 sp">
				<a href="" id="nextstrike" class="btn btn-info">></a>
			</div>
			</div>
		</div>
    </div>
<footer class="fixed-bottom">
	<div class="container-fluid">
		<div class="col-3">
			<a href="home.html">
				<img src="img/home_inactive.svg"><br>Dashboard
			</a>
		</div>
		<div class="col-3 active">
			<a href="play.html">
				<img src="img/input.svg"><br>Input
			</a>
		</div>
		<div class="col-3">
			<a href="stats.html">
				<img src="img/stats_inactive.svg"><br>Stats
			</a>
		</div>
		<div class="col-3">
			<a href="ajustes.html">
				<img src="img/ajustes_inactive.svg"><br>Config.
			</a>
		</div>
	</div>
</footer>

<div class="modal" id="modal1" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Has it been ball holed or lifted?</p>
      </div>
      <div class="modal-footer">
        <button type="button" id="bholed" class="btn btn-primary">Holed</button>
        <button type="button" id="blifted" class="btn btn-primary">Lifted</button>
      </div>
    </div>
  </div>
</div>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="https://unpkg.com/popper.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/bootstrap3-typeahead.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
		
		$(document).ready(function(){
			var par = window.localStorage.getItem("par");
			if (par > 0){
				$('#par').val(par);
			}
			var strike = parseInt(window.localStorage.getItem("strike"));
			if (!(strike > 0)){
				strike = 1;
			}
			if (strike == 1){
			
				$('#prevstrike').hide();
			}
			window.localStorage.setItem("strike", strike);
			if (window.localStorage.getItem("holes") == null){
				var holes = new Array();
			} else {
				var holes = JSON.parse(window.localStorage.getItem("holes"));
			}
			holes[window.localStorage.getItem("shole")] = 1;
			window.localStorage.setItem("holes", JSON.stringify(holes));
			$('#course').html(window.localStorage.getItem("course"));
			$('#hole').html(window.localStorage.getItem("shole"));
			//$('#par').html(window.localStorage.getItem("par"));
			$('#tour').html(window.localStorage.getItem("tour"));
			$('h2 span').html(window.localStorage.getItem("strike"));
			
			$('#lie').val(window.localStorage.getItem("lie"));
			$('#club').val(window.localStorage.getItem("club"));
			shole = window.localStorage.getItem("shole");
			if (parseInt(shole) >= 18){
				$('#endhole').hide();
			}
		});
		$('#prevstrike').click(function(event){
			event.preventDefault();
			var strike = parseInt(window.localStorage.getItem("strike"));
			if (!(strike > 0)){
				strike = 1;
			}
			window.localStorage.setItem("strike", strike-1);
			window.location.href = 'input.html';
		});
		$('#nextstrike').click(function(event){
			event.preventDefault();
			
			$.ajax({
				type: 'post',
				cache: false,
				url: 'http://proyectosweb.info/golf/privado/ajax_save_input',
				data: {
					'user_id':window.localStorage.getItem("user_id"),
					'course':window.localStorage.getItem("course"),
					'tour':window.localStorage.getItem("tour"),
					'hole':window.localStorage.getItem("shole"),
					'par':window.localStorage.getItem("par"),
					'strike':window.localStorage.getItem("strike"),
					'distance':$('#distance').val(),
					'lie':$('#lie').val(),
					'club':$('#club').val(),
					'prevented':$('#prevented:checked').length,
					'penalty':$('#penalty').val(),
					'lifted':0
				},
				dataType: 'json',
				success: function(response){
					var strike = parseInt(window.localStorage.getItem("strike"));
					if (!(strike > 0)){
						strike = 1;
					}
					window.localStorage.setItem("strike", strike+1);
					window.location.href = 'input.html';
				}
			});
		});
/* $('.sqbtn').click(function(){
			$('.sqbtn').removeClass('selected');
			$(this).addClass('selected');
			window.localStorage.setItem("par", $(this).val());
		}); */
		$('#par').change(function(){
			window.localStorage.setItem("par", $(this).val());
		});
		$('#endhole').click(function(event){
			event.preventDefault();
			var gt = window.localStorage.getItem("game_type");
			if (gt == 'Stableford'){
				$("#modal1").modal("show");
			} else {
				$.ajax({
					type: 'post',
					cache: false,
					url: 'http://proyectosweb.info/golf/privado/ajax_save_input',
					data: {
						'user_id':window.localStorage.getItem("user_id"),
						'course':window.localStorage.getItem("course"),
						'tour':1,
						'hole':window.localStorage.getItem("shole"),
						'par':window.localStorage.getItem("par"),
						'strike':window.localStorage.getItem("strike"),
						'distance':$('#distance').val(),
						'lie':$('#lie').val(),
						'club':$('#club').val(),
						'prevented':$('#prevented:checked').length,
						'penalty':$('#penalty:checked').length,
						'lifted':1
					},
					dataType: 'json',
					success: function(response){
						window.localStorage.setItem("strike", 1);
						var shole = parseInt(window.localStorage.getItem("shole"));
						window.localStorage.setItem("shole", shole+1);
						window.location.href = 'input.html';
					}
				});
				
			}
		});
		
		
		$('#toholes').click(function(event){
			event.preventDefault();
			var gt = window.localStorage.getItem("game_type");
			if (gt == 'Stableford'){
				$("#modal1").modal("show");
			} else {
				$.ajax({
					type: 'post',
					cache: false,
					url: 'http://proyectosweb.info/golf/privado/ajax_save_input',
					data: {
						'user_id':window.localStorage.getItem("user_id"),
						'course':window.localStorage.getItem("course"),
						'tour':1,
						'hole':window.localStorage.getItem("shole"),
						'par':window.localStorage.getItem("par"),
						'strike':window.localStorage.getItem("strike"),
						'distance':$('#distance').val(),
						'lie':$('#lie').val(),
						'club':$('#club').val(),
						'prevented':$('#prevented:checked').length,
						'penalty':$('#penalty:checked').length,
						'lifted':1
					},
					dataType: 'json',
					success: function(response){
						window.localStorage.setItem("strike", 1);
						var shole = parseInt(window.localStorage.getItem("shole"));
						window.localStorage.setItem("shole", shole+1);
						window.location.href = 'holes.html';
					}
				});
				
			}
		});
		
		$('#bholed').click(function(event){
			event.preventDefault();
			$("#modal1").modal("hide");
			$.ajax({
				type: 'post',
				cache: false,
				url: 'http://proyectosweb.info/golf/privado/ajax_save_input',
				data: {
					'user_id':window.localStorage.getItem("user_id"),
					'course':window.localStorage.getItem("course"),
					'tour':1,
					'hole':window.localStorage.getItem("shole"),
					'par':window.localStorage.getItem("par"),
					'strike':window.localStorage.getItem("strike"),
					'distance':$('#distance').val(),
					'lie':$('#lie').val(),
					'club':$('#club').val(),
					'prevented':$('#prevented:checked').length,
					'penalty':$('#penalty:checked').length,
					'lifted':0
				},
				dataType: 'json',
				success: function(response){
					window.localStorage.setItem("strike", 1);
					var shole = parseInt(window.localStorage.getItem("shole"));
					window.localStorage.setItem("shole", shole+1);
					window.location.href = 'input.html';
				}
			});
		});
		$('#blifted').click(function(event){
			event.preventDefault();
			$("#modal1").modal("hide");
			$.ajax({
				type: 'post',
				cache: false,
				url: 'http://proyectosweb.info/golf/privado/ajax_save_input',
				data: {
					'user_id':window.localStorage.getItem("user_id"),
					'course':window.localStorage.getItem("course"),
					'tour':1,
					'hole':window.localStorage.getItem("shole"),
					'par':window.localStorage.getItem("par"),
					'strike':window.localStorage.getItem("strike"),
					'distance':$('#distance').val(),
					'lie':$('#lie').val(),
					'club':$('#club').val(),
					'prevented':$('#prevented:checked').length,
					'penalty':$('#penalty:checked').length,
					'lifted':1
				},
				dataType: 'json',
				success: function(response){
					window.localStorage.setItem("strike", 1);
					var shole = parseInt(window.localStorage.getItem("shole"));
					window.localStorage.setItem("shole", shole+1);
					window.location.href = 'input.html';
				}
			});
		});
		
		
		$('#endround').click(function(event){
			event.preventDefault();
			$.ajax({
				type: 'post',
				cache: false,
				url: 'http://proyectosweb.info/golf/privado/ajax_save_input',
				data: {
					'user_id':window.localStorage.getItem("user_id"),
					'course':window.localStorage.getItem("course"),
					'tour':1,
					'hole':window.localStorage.getItem("shole"),
					'par':window.localStorage.getItem("par"),
					'strike':window.localStorage.getItem("strike"),
					'distance':$('#distance').val(),
					'lie':$('#lie').val(),
					'club':$('#club').val(),
					'prevented':$('#prevented:checked').length,
					'penalty':$('#penalty:checked').length,
					'lifted':1
				},
				dataType: 'json',
				success: function(response){
					window.localStorage.removeItem("course");
					window.localStorage.removeItem("shole");
					window.localStorage.removeItem("par");
					window.localStorage.removeItem("strike");
					window.localStorage.removeItem("wind");
					window.localStorage.removeItem("weather");
					window.localStorage.removeItem("game_type");
					window.localStorage.removeItem("bars");
					window.localStorage.removeItem("lie");
					window.localStorage.removeItem("club");
					window.location.href = 'home.html';
				}
			});
		});
		$('#distance').change(function(){
			//$('.s2').removeClass('disabled');
		});
		$('#lie').change(function(){
			if ($('#lie option:selected').val() == 'Green'){
				$('#club').val('Putter').attr('disabled',true);
			} else {
				$('#club').attr('disabled',false);
			}
			//$('.s3').removeClass('disabled');
			window.localStorage.setItem("lie", $(this).val());
		});
		$('#club').change(function(){
			//$('.s4').removeClass('disabled');
			//$('.s5').removeClass('disabled');
			window.localStorage.setItem("club", $(this).val());
		});
		$('#penalty').change(function(){
			strike = window.localStorage.getItem("strike");
			window.localStorage.setItem("strike", parseInt(strike)+parseInt($(this).val()));
			$('h2 span').html(window.localStorage.getItem("strike"));
			//$('.s4').removeClass('disabled');
			//$('.s5').removeClass('disabled');
		});
    </script>
</body>

</html>